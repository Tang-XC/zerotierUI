import{m as W,j as e,r as b,_ as h,u as k,b as I,a as M,aa as _,T as f,ac as A}from"./index-zagjAXpn.js";import{b as B,u as G,C as m,T as p}from"./index.esm-VSp74q1d.js";import{T as L,L as x}from"./Link-YGTEBdW0.js";import{B as l,a as S}from"./Button-oP4buTuz.js";import{G as c}from"./Grid-caY0DriI.js";import"./FormLabel-A2euTGeW.js";const q=(t,n)=>h({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},n&&!t.vars&&{colorScheme:t.palette.mode}),F=t=>h({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),z=(t,n=!1)=>{var a;const s={};n&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([g,y])=>{var i;s[t.getColorSchemeSelector(g).replace(/\s*&/,"")]={colorScheme:(i=y.palette)==null?void 0:i.mode}});let o=h({html:q(t,n),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:h({margin:0},F(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},s);const d=(a=t.components)==null||(a=a.MuiCssBaseline)==null?void 0:a.styleOverrides;return d&&(o=[o,d]),o};function O(t){const n=W({props:t,name:"MuiCssBaseline"}),{children:a,enableColorScheme:s=!1}=n;return e.jsxs(b.Fragment,{children:[e.jsx(B,{styles:o=>z(o,s)}),a]})}const V=()=>{const[t,n]=b.useState(!0),a=k(),{control:s,handleSubmit:o,reset:d}=G(),{state:g,signIn:y}=I(),{dispatch:i}=M(),v=_({palette:{primary:{main:"#45a164"}}}),j={account:"",password:"",repassword:""},C=async r=>{const u=await y(r);u.code===200?(i({type:"SET_MESSAGE",payload:{type:"success",content:"登录成功",delay:5e3}}),a("/home")):i({type:"SET_MESSAGE",payload:{type:"error",content:u.msg,delay:5e3}}),d(j)},E=async r=>{const u=await A(r);u.code===200?i({type:"SET_MESSAGE",payload:{type:"success",content:"注册成功",delay:5e3}}):i({type:"SET_MESSAGE",payload:{type:"error",content:u.msg,delay:5e3}}),d(j)},w=()=>e.jsxs(l,{maxWidth:"30%",display:"flex",paddingLeft:8,borderLeft:"1px solid #ccc",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[e.jsx(f,{variant:"h5",children:"登录"}),e.jsxs(l,{sx:{mt:1},children:[e.jsxs("form",{onSubmit:o(C),children:[e.jsx(m,{name:"account",control:s,rules:{required:!0},render:({field:r})=>e.jsx(p,{id:r.name,margin:"normal",fullWidth:!0,label:"账号",...r})}),e.jsx(m,{name:"password",control:s,rules:{required:!0},render:({field:r})=>e.jsx(p,{margin:"normal",fullWidth:!0,label:"密码",type:"password",id:"password",...r})}),e.jsx(S,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"登录"})]}),e.jsxs(c,{container:!0,children:[e.jsx(c,{item:!0,xs:!0,children:e.jsx(x,{href:"#",variant:"body2",children:"忘记密码？"})}),e.jsx(c,{item:!0,children:e.jsx(x,{href:"#",variant:"body2",onClick:()=>n(!1),children:"还没有账号？去注册"})})]})]})]}),T=()=>e.jsxs(l,{maxWidth:"30%",display:"flex",paddingLeft:8,borderLeft:"1px solid #ccc",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[e.jsx(f,{variant:"h5",children:"注册"}),e.jsxs(l,{sx:{mt:1},children:[e.jsxs("form",{onSubmit:o(E),children:[e.jsx(m,{name:"account",control:s,rules:{required:!0},render:({field:r})=>e.jsx(p,{id:r.name,margin:"normal",fullWidth:!0,label:"账号",...r})}),e.jsx(m,{name:"password",control:s,rules:{required:!0},render:({field:r})=>e.jsx(p,{margin:"normal",fullWidth:!0,label:"密码",type:"password",id:"password",...r})}),e.jsx(m,{name:"repassword",control:s,rules:{required:!0},render:({field:r})=>e.jsx(p,{margin:"normal",fullWidth:!0,label:"重复密码",type:"password",id:"repassword",...r})}),e.jsx(S,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"登录"})]}),e.jsxs(c,{container:!0,children:[e.jsx(c,{item:!0,xs:!0,children:e.jsx(x,{href:"#",variant:"body2"})}),e.jsx(c,{item:!0,children:e.jsx(x,{href:"#",variant:"body2",onClick:()=>n(!0),children:"已有账号？去登录"})})]})]})]});return e.jsx(L,{theme:v,children:e.jsxs(l,{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",children:[e.jsx(O,{}),e.jsxs(l,{justifyContent:"center",paddingRight:8,alignItems:"center",children:[e.jsx(f,{variant:"h1",children:"翼信捷"}),e.jsx("h1",{children:"SD-LAN控制中心"})]}),t?e.jsx(w,{}):e.jsx(T,{})]})})};export{V as default};
