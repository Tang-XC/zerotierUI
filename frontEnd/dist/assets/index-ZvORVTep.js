import{_ as c,x as q,l as h,y as w,r as b,o as z,j as r,q as T,t as W,k as $,i as F,s as A,P as H,m as L,Q as I,b as U,a as V,u as S,I as Q,a8 as Y,T as J,a9 as K,aa as X,O as Z}from"./index-zagjAXpn.js";import{S as oo}from"./index-5I_I5o-u.js";import{d as ao}from"./LockReset-_Bdu7hO3.js";import{u as ro,M as to,C as D,T as N}from"./index.esm-VSp74q1d.js";import{B as M,a as R}from"./Button-oP4buTuz.js";import{M as O,T as eo}from"./Toolbar-dqB7quMk.js";import{s as so,L as _}from"./ListItemIcon-6rHc67gQ.js";import{M as no}from"./FormLabel-A2euTGeW.js";import{L as io,T as lo}from"./Link-YGTEBdW0.js";import"./dividerClasses-87-CPEWq.js";const co=["className","component","disableGutters","fixed","maxWidth","classes"],po=q(),uo=so("div",{name:"MuiContainer",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:t}=a;return[o.root,o[`maxWidth${h(String(t.maxWidth))}`],t.fixed&&o.fixed,t.disableGutters&&o.disableGutters]}}),xo=a=>w({props:a,name:"MuiContainer",defaultTheme:po}),mo=(a,o)=>{const t=d=>$(o,d),{classes:n,fixed:i,disableGutters:l,maxWidth:e}=a,s={root:["root",e&&`maxWidth${h(String(e))}`,i&&"fixed",l&&"disableGutters"]};return W(s,t,n)};function fo(a={}){const{createStyledComponent:o=uo,useThemeProps:t=xo,componentName:n="MuiContainer"}=a,i=o(({theme:e,ownerState:s})=>c({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!s.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}),({theme:e,ownerState:s})=>s.fixed&&Object.keys(e.breakpoints.values).reduce((d,x)=>{const p=x,m=e.breakpoints.values[p];return m!==0&&(d[e.breakpoints.up(p)]={maxWidth:`${m}${e.breakpoints.unit}`}),d},{}),({theme:e,ownerState:s})=>c({},s.maxWidth==="xs"&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},s.maxWidth&&s.maxWidth!=="xs"&&{[e.breakpoints.up(s.maxWidth)]:{maxWidth:`${e.breakpoints.values[s.maxWidth]}${e.breakpoints.unit}`}}));return b.forwardRef(function(s,d){const x=t(s),{className:p,component:m="div",disableGutters:C=!1,fixed:j=!1,maxWidth:f="lg"}=x,y=z(x,co),v=c({},x,{component:m,disableGutters:C,fixed:j,maxWidth:f}),g=mo(v,n);return r.jsx(i,c({as:m,ownerState:v,className:T(g.root,p),ref:d},y))})}function go(a){return $("MuiAppBar",a)}F("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const vo=["className","color","enableColorOnDark","position"],ho=a=>{const{color:o,position:t,classes:n}=a,i={root:["root",`color${h(o)}`,`position${h(t)}`]};return W(i,go,n)},B=(a,o)=>a?`${a==null?void 0:a.replace(")","")}, ${o})`:o,bo=A(H,{name:"MuiAppBar",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:t}=a;return[o.root,o[`position${h(t.position)}`],o[`color${h(t.color)}`]]}})(({theme:a,ownerState:o})=>{const t=a.palette.mode==="light"?a.palette.grey[100]:a.palette.grey[900];return c({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},o.position==="fixed"&&{position:"fixed",zIndex:(a.vars||a).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},o.position==="absolute"&&{position:"absolute",zIndex:(a.vars||a).zIndex.appBar,top:0,left:"auto",right:0},o.position==="sticky"&&{position:"sticky",zIndex:(a.vars||a).zIndex.appBar,top:0,left:"auto",right:0},o.position==="static"&&{position:"static"},o.position==="relative"&&{position:"relative"},!a.vars&&c({},o.color==="default"&&{backgroundColor:t,color:a.palette.getContrastText(t)},o.color&&o.color!=="default"&&o.color!=="inherit"&&o.color!=="transparent"&&{backgroundColor:a.palette[o.color].main,color:a.palette[o.color].contrastText},o.color==="inherit"&&{color:"inherit"},a.palette.mode==="dark"&&!o.enableColorOnDark&&{backgroundColor:null,color:null},o.color==="transparent"&&c({backgroundColor:"transparent",color:"inherit"},a.palette.mode==="dark"&&{backgroundImage:"none"})),a.vars&&c({},o.color==="default"&&{"--AppBar-background":o.enableColorOnDark?a.vars.palette.AppBar.defaultBg:B(a.vars.palette.AppBar.darkBg,a.vars.palette.AppBar.defaultBg),"--AppBar-color":o.enableColorOnDark?a.vars.palette.text.primary:B(a.vars.palette.AppBar.darkColor,a.vars.palette.text.primary)},o.color&&!o.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":o.enableColorOnDark?a.vars.palette[o.color].main:B(a.vars.palette.AppBar.darkBg,a.vars.palette[o.color].main),"--AppBar-color":o.enableColorOnDark?a.vars.palette[o.color].contrastText:B(a.vars.palette.AppBar.darkColor,a.vars.palette[o.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:o.color==="inherit"?"inherit":"var(--AppBar-color)"},o.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),ko=b.forwardRef(function(o,t){const n=L({props:o,name:"MuiAppBar"}),{className:i,color:l="primary",enableColorOnDark:e=!1,position:s="fixed"}=n,d=z(n,vo),x=c({},n,{color:l,position:s,enableColorOnDark:e}),p=ho(x);return r.jsx(bo,c({square:!0,component:"header",ownerState:x,elevation:4,className:T(p.root,i,s==="fixed"&&"mui-fixed"),ref:t},d))}),Co=ko,jo=I(r.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function yo(a){return $("MuiAvatar",a)}F("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Ao=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],Bo=a=>{const{classes:o,variant:t,colorDefault:n}=a;return W({root:["root",t,n&&"colorDefault"],img:["img"],fallback:["fallback"]},yo,o)},Mo=A("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:t}=a;return[o.root,o[t.variant],t.colorDefault&&o.colorDefault]}})(({theme:a,ownerState:o})=>c({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:a.typography.fontFamily,fontSize:a.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},o.variant==="rounded"&&{borderRadius:(a.vars||a).shape.borderRadius},o.variant==="square"&&{borderRadius:0},o.colorDefault&&c({color:(a.vars||a).palette.background.default},a.vars?{backgroundColor:a.vars.palette.Avatar.defaultBg}:{backgroundColor:a.palette.mode==="light"?a.palette.grey[400]:a.palette.grey[600]}))),Io=A("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(a,o)=>o.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Ro=A(jo,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(a,o)=>o.fallback})({width:"75%",height:"75%"});function zo({crossOrigin:a,referrerPolicy:o,src:t,srcSet:n}){const[i,l]=b.useState(!1);return b.useEffect(()=>{if(!t&&!n)return;l(!1);let e=!0;const s=new Image;return s.onload=()=>{e&&l("loaded")},s.onerror=()=>{e&&l("error")},s.crossOrigin=a,s.referrerPolicy=o,s.src=t,n&&(s.srcset=n),()=>{e=!1}},[a,o,t,n]),i}const To=b.forwardRef(function(o,t){const n=L({props:o,name:"MuiAvatar"}),{alt:i,children:l,className:e,component:s="div",imgProps:d,sizes:x,src:p,srcSet:m,variant:C="circular"}=n,j=z(n,Ao);let f=null;const y=zo(c({},d,{src:p,srcSet:m})),v=p||m,g=v&&y!=="error",k=c({},n,{colorDefault:!g,component:s,variant:C}),u=Bo(k);return g?f=r.jsx(Io,c({alt:i,srcSet:m,src:p,sizes:x,ownerState:k,className:u.img},d)):l!=null?f=l:v&&i?f=i[0]:f=r.jsx(Ro,{ownerState:k,className:u.fallback}),r.jsx(Mo,c({as:s,ownerState:k,className:T(u.root,e),ref:t},j,{children:f}))}),Wo=To,$o=fo({createStyledComponent:A("div",{name:"MuiContainer",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:t}=a;return[o.root,o[`maxWidth${h(String(t.maxWidth))}`],t.fixed&&o.fixed,t.disableGutters&&o.disableGutters]}}),useThemeProps:a=>L({props:a,name:"MuiContainer"})}),Lo=$o,Po=I(r.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),Do=I(r.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),No=I(r.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"}),"Logout"),E="未设置用户名",G="/avatar.jpeg",Oo=a=>{const{name:o=E,avatar:t=G}=a,[n,i]=b.useState(null),l=!!n,[e,s]=b.useState(!1),{signOut:d}=U(),{dispatch:x}=V(),{control:p,handleSubmit:m,reset:C}=ro({defaultValues:{old_password:"",new_password:""}}),j=S(),f=()=>{g(),d(),j("/home")},y=()=>{g(),s(!0)},v=u=>{i(u.currentTarget)},g=()=>{i(null)},k=async u=>{const P=await Y(u);P.code===200&&s(!1),P.code===200&&(x({type:"SET_MESSAGE",payload:{type:"success",content:"密码修改成功",delay:5e3}}),C({old_password:"",new_password:""}))};return r.jsxs("div",{className:"avatar-wrap d-flex",children:[r.jsxs(Q,{onClick:v,size:"small","aria-controls":l?"account-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,children:[r.jsx(Wo,{sx:{width:"50px",height:"50px"},src:t||G}),r.jsxs(M,{sx:{ml:1,color:"#fff",display:"flex",alignItems:"center"},children:[o||E,l?r.jsx(Po,{}):r.jsx(Do,{})]})]}),r.jsxs(to,{anchorEl:n,id:"account-menu",open:l,onClose:g,onClick:g,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&::before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[r.jsxs(O,{onClick:y,children:[r.jsx(_,{children:r.jsx(ao,{fontSize:"small"})}),"更改密码"]}),r.jsxs(O,{onClick:f,children:[r.jsx(_,{children:r.jsx(No,{fontSize:"small"})}),"退出登录"]})]}),r.jsx(no,{open:e,onClose:()=>s(!1),sx:{display:"grid",placeItems:"center"},children:r.jsx(M,{sx:{backgroundColor:"white",p:2,borderRadius:1},children:r.jsxs("form",{onSubmit:m(k),children:[r.jsx(D,{name:"old_password",control:p,rules:{required:!0},render:({field:u})=>r.jsx(N,{id:u.name,margin:"normal",fullWidth:!0,label:"旧密码",...u})}),r.jsx(D,{name:"new_password",control:p,rules:{required:!0},render:({field:u})=>r.jsx(N,{id:u.name,margin:"normal",fullWidth:!0,label:"新密码",...u})}),r.jsxs(M,{sx:{display:"flex",justifyContent:"flex-end"},children:[r.jsx(R,{type:"button",variant:"contained",sx:{mt:3,mb:2},onClick:()=>s(!1),children:"取消"}),r.jsx(R,{type:"submit",variant:"contained",sx:{mt:3,mb:2,ml:1},children:"确定"})]})]})})})]})},_o=a=>{const{state:o}=U(),t=S(),n=i=>{t(i)};return r.jsx(r.Fragment,{children:r.jsx(Co,{position:"relative",sx:{zIndex:"1"},children:r.jsxs(eo,{sx:{flexWrap:"wrap"},children:[r.jsxs(J,{variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1},display:"flex",alignItems:"center",children:[r.jsx(oo,{name:"logo",size:"50"}),r.jsx("span",{style:{marginLeft:16},children:"SD-LAN控制中心"})]}),r.jsx("nav",{children:K.map((i,l)=>{var e;return r.jsx(io,{color:"inherit",underline:"none",sx:{my:1,mx:1.5,cursor:"pointer"},onClick:()=>{n(i.path)},children:(e=i.showNav)==null?void 0:e.title},l)})}),o.token?r.jsx(Oo,{name:o.name,avatar:o.avatar}):r.jsx(M,{sx:{ml:1},children:r.jsx(R,{variant:"outlined",color:"inherit",onClick:()=>n("/auth"),children:"登录"})})]})})})},Yo=a=>{const o=X({palette:{primary:{main:"#45a164"}},components:{MuiListItemButton:{styleOverrides:{root:{"&.Mui-selected":{backgroundColor:"var(--selectedBgColor)!important",color:"var(--selectedTextColor)!important"},"&:hover":{backgroundColor:"var(--hoverBgColor)"}}}}}});return r.jsxs(lo,{theme:o,children:[r.jsx(_o,{}),r.jsx(Lo,{disableGutters:!0,maxWidth:!1,sx:{p:3},children:r.jsx(Z,{})})]})};export{Yo as default};
